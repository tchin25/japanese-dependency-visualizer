(function(e){function t(t){for(var r,i,l=t[0],o=t[1],d=t[2],u=0,h=[];u<l.length;u++)i=l[u],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&h.push(a[i][0]),a[i]=0;for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r]);s&&s(t);while(h.length)h.shift()();return c.push.apply(c,d||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,i=1;i<n.length;i++){var o=n[i];0!==a[o]&&(r=!1)}r&&(c.splice(t--,1),e=l(l.s=n[0]))}return e}var r={},a={app:0},c=[];function i(e){return l.p+"js/"+({about:"about"}[e]||e)+"."+{about:"45a3c501"}[e]+".js"}function l(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(e){var t=[],n=a[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,r){n=a[e]=[t,r]}));t.push(n[2]=r);var c,o=document.createElement("script");o.charset="utf-8",o.timeout=120,l.nc&&o.setAttribute("nonce",l.nc),o.src=i(e);var d=new Error;c=function(t){o.onerror=o.onload=null,clearTimeout(u);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),c=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+c+")",d.name="ChunkLoadError",d.type=r,d.request=c,n[1](d)}a[e]=void 0}};var u=setTimeout((function(){c({type:"timeout",target:o})}),12e4);o.onerror=o.onload=c,document.head.appendChild(o)}return Promise.all(t)},l.m=e,l.c=r,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)l.d(n,r,function(t){return e[t]}.bind(null,r));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/japanese-dependency-visualizer/",l.oe=function(e){throw console.error(e),e};var o=window["webpackJsonp"]=window["webpackJsonp"]||[],d=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var s=d;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"1a3c":function(e,t,n){"use strict";n("5976")},"33f7":function(e,t,n){"use strict";n("907d")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23");function a(e,t,n,a,c,i){var l=Object(r["y"])("the-header"),o=Object(r["y"])("router-view");return Object(r["r"])(),Object(r["d"])(r["a"],null,[Object(r["h"])(l),Object(r["h"])(o)],64)}var c=Object(r["G"])("data-v-661dc26a");Object(r["u"])("data-v-661dc26a");var i={class:"navbar",role:"navigation","aria-label":"main navigation"},l={class:"navbar-brand"},o=Object(r["h"])("h1",{class:"navbar-item title mb-0 is-hidden-touch"}," Japanese Dependency Visualizer ",-1),d=Object(r["h"])("h1",{class:"navbar-item mb-0 is-hidden-desktop"}," Japanese Dependency Visualizer ",-1),u=Object(r["h"])("span",{"aria-hidden":"true"},null,-1),s=Object(r["h"])("span",{"aria-hidden":"true"},null,-1),h=Object(r["h"])("span",{"aria-hidden":"true"},null,-1),b={class:"navbar-end"},f=Object(r["g"])("Home"),p=Object(r["g"])("About");Object(r["s"])();var v=c((function(e,t,n,a,v,O){var j=Object(r["y"])("router-link");return Object(r["r"])(),Object(r["d"])("nav",i,[Object(r["h"])("div",l,[o,d,Object(r["h"])("a",{role:"button",class:["navbar-burger burger",v.isActive?"is-active":""],"aria-label":"menu","aria-expanded":"false","data-target":"navbarItems",onClick:t[1]||(t[1]=function(e){return v.isActive=!v.isActive})},[u,s,h],2)]),Object(r["h"])("div",{id:"navbarItems",class:["navbar-menu",v.isActive?"is-active":""]},[Object(r["h"])("div",b,[Object(r["h"])(j,{to:"/",class:"navbar-item"},{default:c((function(){return[f]})),_:1}),Object(r["h"])(j,{to:"/about",class:"navbar-item"},{default:c((function(){return[p]})),_:1})])],2)])})),O={data:function(){return{isActive:!1}}};n("33f7");O.render=v,O.__scopeId="data-v-661dc26a";var j=O,k={components:{TheHeader:j}};n("9574");k.render=a;var w=k,m=(n("d3b7"),n("6c02")),g=n("ae54"),y=n.n(g),x={class:"section"},I={class:"container"},F={class:"section pt-0"},S={class:"container"},C={style:{width:"100%"},class:"columns ml-0"},E={class:"column is-one-fifth"},T={class:"column"},A=Object(r["h"])("div",{class:"footer-wrapper"},[Object(r["h"])("footer",{class:"footer"},[Object(r["h"])("div",{class:"level"},[Object(r["h"])("div",{class:"level-left"},[Object(r["h"])("figure",{class:"image is-64x64"},[Object(r["h"])("img",{class:"is-rounded",src:y.a})]),Object(r["h"])("h1",{class:"title is-4 ml-2"},[Object(r["g"])(" A side project by "),Object(r["h"])("a",{href:"https://thomasch.in/"}," Thomas Chin ")])])])])],-1);function D(e,t,n,a,c,i){var l=Object(r["y"])("SentenceInput"),o=Object(r["y"])("TokenTable"),d=Object(r["y"])("DependencyVisualizer");return Object(r["r"])(),Object(r["d"])(r["a"],null,[Object(r["h"])("div",x,[Object(r["h"])("div",I,[Object(r["h"])(l)])]),Object(r["h"])("div",F,[Object(r["h"])("div",S,[Object(r["h"])("div",C,[Object(r["h"])("div",E,[Object(r["h"])(o,{style:{height:"100%"}})]),Object(r["h"])("div",T,[Object(r["h"])(d)])])])]),A],64)}var _={class:"field has-addons"},z={class:"control is-expanded"},P={class:"control"};function N(e,t,n,a,c,i){return Object(r["r"])(),Object(r["d"])("div",_,[Object(r["h"])("div",z,[Object(r["F"])(Object(r["h"])("input",{class:"input",type:"text",placeholder:"Input","onUpdate:modelValue":t[1]||(t[1]=function(e){return i.sentence=e})},null,512),[[r["D"],i.sentence]])]),Object(r["h"])("div",P,[Object(r["h"])("button",{class:["button is-primary",c.disabled?"is-loading":""],type:"submit",value:"Submit",disabled:c.disabled,onClick:t[2]||(t[2]=function(){return i.setSentenceFlow.apply(i,arguments)})}," Auto-Generate Flow ",10,["disabled"])])])}n("99af"),n("4de4"),n("7db0"),n("c740"),n("0481"),n("4160"),n("a15b"),n("d81d"),n("13d5"),n("a434"),n("4069"),n("ac1f"),n("1276"),n("159b"),n("96cf");var R=n("1da1"),Z=n("53ca"),V=(n("6062"),n("3ca3"),n("498a"),n("ddb0"),n("b85c")),L={levels:[[{id:0,label:"店内に",children:[],parentId:1}],[{id:1,label:"散らばっている",children:[0],parentId:3},{id:2,label:"無数の",children:[],parentId:3}],[{id:3,label:"音たちから",children:[2,1],parentId:5},{id:4,label:"情報を",children:[],parentId:5},{id:6,label:"私の",children:[],parentId:7},{id:8,label:"納品されたばかりの",children:[],parentId:9}],[{id:5,label:"拾いながら、",children:[4,3],parentId:10},{id:7,label:"身体は",children:[6],parentId:10},{id:9,label:"おにぎりを",children:[8],parentId:10}],[{id:10,label:"並べている",children:[9,7,5],parentId:-1}]],readable:[[{id:0,label:"店内に",children:[],parentId:1}],[{id:1,label:"散らばっている",children:[0],parentId:3}],[{id:2,label:"無数の",children:[],parentId:3}],[{id:3,label:"音たちから",children:[2,1],parentId:5}],[{id:4,label:"情報を",children:[],parentId:5}],[{id:5,label:"拾いながら、",children:[4,3],parentId:10}],[{id:6,label:"私の",children:[],parentId:7}],[{id:7,label:"身体は",children:[6],parentId:10}],[{id:8,label:"納品されたばかりの",children:[],parentId:9}],[{id:9,label:"おにぎりを",children:[8],parentId:10}],[{id:10,label:"並べている",children:[9,7,5],parentId:-1}]],readable_c:[[{id:0,label:"店内に",children:[],parentId:1}],[{id:1,label:"散らばっている",children:[0],parentId:3},{id:2,label:"無数の",children:[],parentId:3}],[{id:3,label:"音たちから",children:[2,1],parentId:5},{id:4,label:"情報を",children:[],parentId:5}],[{id:5,label:"拾いながら、",children:[4,3],parentId:10},{id:6,label:"私の",children:[],parentId:7}],[{id:7,label:"身体は",children:[6],parentId:10},{id:8,label:"納品されたばかりの",children:[],parentId:9}],[{id:9,label:"おにぎりを",children:[8],parentId:10}],[{id:10,label:"並べている",children:[9,7,5],parentId:-1}]],xml:'<sentence>\n  <chunk id="0" link="1" rel="D" score="1.894732" head="0" func="1">\n   <tok id="0" feature="名詞,一般,*,*,*,*,店内,テンナイ,テンナイ">店内</tok>\n   <tok id="1" feature="助詞,格助詞,一般,*,*,*,に,ニ,ニ">に</tok>\n  </chunk>\n  <chunk id="1" link="3" rel="D" score="1.344092" head="2" func="4">\n   <tok id="2" feature="動詞,自立,*,*,五段・ラ行,連用タ接続,散らばる,チラバッ,チラバッ">散らばっ</tok>\n   <tok id="3" feature="助詞,接続助詞,*,*,*,*,て,テ,テ">て</tok>\n   <tok id="4" feature="動詞,非自立,*,*,一段,基本形,いる,イル,イル">いる</tok>\n  </chunk>\n  <chunk id="2" link="3" rel="D" score="1.512923" head="5" func="6">\n   <tok id="5" feature="名詞,一般,*,*,*,*,無数,ムスウ,ムスー">無数</tok>\n   <tok id="6" feature="助詞,連体化,*,*,*,*,の,ノ,ノ">の</tok>\n  </chunk>\n  <chunk id="3" link="5" rel="D" score="1.120838" head="8" func="9">\n   <tok id="7" feature="名詞,一般,*,*,*,*,音,オト,オト">音</tok>\n   <tok id="8" feature="名詞,接尾,一般,*,*,*,たち,タチ,タチ">たち</tok>\n   <tok id="9" feature="助詞,格助詞,一般,*,*,*,から,カラ,カラ">から</tok>\n  </chunk>\n  <chunk id="4" link="5" rel="D" score="2.817956" head="10" func="11">\n   <tok id="10" feature="名詞,一般,*,*,*,*,情報,ジョウホウ,ジョーホー">情報</tok>\n   <tok id="11" feature="助詞,格助詞,一般,*,*,*,を,ヲ,ヲ">を</tok>\n  </chunk>\n  <chunk id="5" link="10" rel="D" score="-1.516635" head="12" func="13">\n   <tok id="12" feature="動詞,自立,*,*,五段・ワ行促音便,連用形,拾う,ヒロイ,ヒロイ">拾い</tok>\n   <tok id="13" feature="助詞,接続助詞,*,*,*,*,ながら,ナガラ,ナガラ">ながら</tok>\n   <tok id="14" feature="記号,読点,*,*,*,*,、,、,、">、</tok>\n  </chunk>\n  <chunk id="6" link="7" rel="D" score="1.768437" head="15" func="16">\n   <tok id="15" feature="名詞,代名詞,一般,*,*,*,私,ワタシ,ワタシ">私</tok>\n   <tok id="16" feature="助詞,連体化,*,*,*,*,の,ノ,ノ">の</tok>\n  </chunk>\n  <chunk id="7" link="10" rel="D" score="-1.516635" head="17" func="18">\n   <tok id="17" feature="名詞,一般,*,*,*,*,身体,シンタイ,シンタイ">身体</tok>\n   <tok id="18" feature="助詞,係助詞,*,*,*,*,は,ハ,ワ">は</tok>\n  </chunk>\n  <chunk id="8" link="9" rel="D" score="1.672161" head="20" func="24">\n   <tok id="19" feature="名詞,サ変接続,*,*,*,*,納品,ノウヒン,ノーヒン">納品</tok>\n   <tok id="20" feature="動詞,自立,*,*,サ変・スル,未然レル接続,する,サ,サ">さ</tok>\n   <tok id="21" feature="動詞,接尾,*,*,一段,連用形,れる,レ,レ">れ</tok>\n   <tok id="22" feature="助動詞,*,*,*,特殊・タ,基本形,た,タ,タ">た</tok>\n   <tok id="23" feature="助詞,副助詞,*,*,*,*,ばかり,バカリ,バカリ">ばかり</tok>\n   <tok id="24" feature="助詞,連体化,*,*,*,*,の,ノ,ノ">の</tok>\n  </chunk>\n  <chunk id="9" link="10" rel="D" score="-1.516635" head="25" func="26">\n   <tok id="25" feature="名詞,一般,*,*,*,*,おにぎり,オニギリ,オニギリ">おにぎり</tok>\n   <tok id="26" feature="助詞,格助詞,一般,*,*,*,を,ヲ,ヲ">を</tok>\n  </chunk>\n  <chunk id="10" link="-1" rel="D" score="0.000000" head="27" func="29">\n   <tok id="27" feature="動詞,自立,*,*,一段,連用形,並べる,ナラベ,ナラベ">並べ</tok>\n   <tok id="28" feature="助詞,接続助詞,*,*,*,*,て,テ,テ">て</tok>\n   <tok id="29" feature="動詞,非自立,*,*,一段,基本形,いる,イル,イル">いる</tok>\n  </chunk>\n </sentence>',levels2:[[{id:0,label:"彼は",children:[],parentId:3},{id:1,label:"マクで",children:[],parentId:3},{id:2,label:"昼ご飯を",children:[],parentId:3}],[{id:3,label:"食べます。",children:[2,1,0],parentId:-1}]],readable2:[[{id:0,label:"彼は",children:[],parentId:3}],[{id:1,label:"マクで",children:[],parentId:3}],[{id:2,label:"昼ご飯を",children:[],parentId:3}],[{id:3,label:"食べます。",children:[2,1,0],parentId:-1}]],readable2_c:[[{id:0,label:"彼は",children:[],parentId:3},{id:1,label:"マクで",children:[],parentId:3},{id:2,label:"昼ご飯を",children:[],parentId:3}],[{id:3,label:"食べます。",children:[2,1,0],parentId:-1}]]},J=function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,c,i,l,o,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",[]);case 2:return t=t.split("|").join(""),n="https://cabocha-nke3uh5gza-uc.a.run.app/",e.prev=4,e.next=7,fetch(n+t).then((function(e){return e.text()}));case 7:for(r=e.sent,a=new DOMParser,c=a.parseFromString(r,"text/xml"),i=[],l=c.getElementsByTagName("chunk"),o=function(e){var t={},n=l[e],r=n.textContent.split("\n");t.label="",r.forEach((function(e){t.label+=e.trim()})),t.id=parseInt(n.getAttribute("id")),t.parentId=parseInt(n.getAttribute("link")),t.children=[],i.push([t])},d=0;d<l.length;d++)o(d);return i.forEach((function(e){var t=e[0],n=t.id,r=t.parentId;r>=0&&i[r][0].children.push(n)})),i.forEach((function(e){var t=e[0];t.children.sort((function(e,t){return t-e}))})),e.abrupt("return",i);case 19:return e.prev=19,e.t0=e["catch"](4),e.abrupt("return",[[{id:0,label:t,children:[],parentId:-1}]]);case 22:case"end":return e.stop()}}),e,null,[[4,19]])})));return function(t){return e.apply(this,arguments)}}(),M=Object(r["w"])(L.readable),U=function(){var e=Object(r["b"])((function(){return JSON.stringify(M.value)})),t=Object(r["b"])((function(){if(0===M.value.length)return[];var e=JSON.parse(JSON.stringify(M.value)),t=[];t.unshift([]);for(var n=0;n<e.length;n++)-1===e[n][0].parentId&&t[0].push(e[n][0]);for(var r=0;r<t.length;r++){for(var a=[],c=function(n){for(var r=function(r){var c=e.find((function(e){return e[0].id===t[0][n].children[r]}));a.unshift(c[0])},c=0;c<t[0][n].children.length;c++)r(c)},i=t[0].length-1;i>=0;i--)c(i);a.length>0&&t.unshift(a)}return t})),n=Object(r["b"])((function(){if(0===M.value.length)return[];var e=JSON.parse(JSON.stringify(M.value)),t=[];t.push([]);for(var n=new Set,r=0;r<e.length;r++){var a=e[r][0];if(t[t.length-1].push(a),n.add(a.id),r===e.length-1)break;var c,i=Object(V["a"])(e[r+1][0].children);try{for(i.s();!(c=i.n()).done;){var l=c.value;if(n.has(l)){t.push([]),n.clear();break}}}catch(o){i.e(o)}finally{i.f()}}return t})),a=function(e){e.children.sort((function(e,t){var n=M.value.flat(),r=n.findIndex((function(t){return t.id===e})),a=n.findIndex((function(e){return e.id===t}));return a-r}))};return{sentenceFlow:M,sentenceFlowString:e,levelsFlow:t,compactedSentenceFlow:n,sortTokenChildren:a}},B={setup:function(){var e=U(),t=e.sentenceFlow,n=e.sortTokenChildren;return{sentenceFlow:t,sortTokenChildren:n,generateSentenceFlow:J}},data:function(){return{disabled:!1}},computed:{sentence:{get:function(){return this.sentenceFlow.flat().map((function(e){return e.label})).join("|")},set:function(e){var t=this;if(""!==e){var n=e.split("|"),r=n.length-this.sentenceFlow.length;if(1!==Math.abs(r)&&0!==r)return this.sentenceFlow=[],void n.forEach((function(e,n){t.sentenceFlow.push([{id:n,label:e,children:[],parentId:-1}])}));if(1===r){if(1===n.length)return void this.sentenceFlow.push([{id:0,label:n[0],children:[],parentId:-1}]);for(var a=this.sentenceFlow.reduce((function(e,t){return t[0].id>e?t[0].id:e}),-1)+1,c=0;c<n.length;c++){if(c===this.sentenceFlow.length){this.sentenceFlow.push([{id:a,label:n[c],children:[],parentId:-1}]);break}if(this.sentenceFlow[c][0].label!==n[c]){this.sentenceFlow.splice(c,0,[{id:a,label:n[c],children:[],parentId:-1}]),this.sentenceFlow[c+1][0].label=n[c+1];break}}}else if(-1===r)for(var i=0;i<this.sentenceFlow.length-1;i++){if(this.sentenceFlow[i][0].label!==n[i]&&this.sentenceFlow[i+1][0].label===n[i]){var l=function(){var e=t.sentenceFlow[i][0];e.children.forEach((function(e){var n=t.sentenceFlow.find((function(t){return t[0].id===e}))[0];n&&(n.parentId=-1)}));var n=t.sentenceFlow.find((function(t){return t[0].id===e.parentId}));return n&&(n[0].children=n[0].children.filter((function(t){return t!=e.id}))),t.sentenceFlow.splice(i,1),{v:void 0}}();if("object"===Object(Z["a"])(l))return l.v}if(this.sentenceFlow[i][0].label!==n[i]||i===n.length-1){var o=function(){var e=t.sentenceFlow[i][0],r=t.sentenceFlow[i+1][0];i===n.length-1&&t.sentenceFlow[i][0].label===n[i]&&(r.label=""),r.children=r.children.filter((function(t){return t!==e.id})),e.label+=r.label;var a=r.parentId,c=r.id,l=t.sentenceFlow.find((function(e){return e[0].id===a}));if(l){l[0].children=l[0].children.filter((function(e){return e!=c}));var o=l[0].children.findIndex((function(t){return t===e.id}));o<0&&(l[0].children.push(e.id),t.sortTokenChildren(l[0]))}return e.parentId=r.parentId,e.children=e.children.concat(r.children),t.sortTokenChildren(e),r.children.forEach((function(n){var r=t.sentenceFlow.find((function(e){return e[0].id===n}))[0];r&&(r.parentId=e.id)})),i===n.length?(t.sentenceFlow.splice(i,1),"break"):(t.sentenceFlow.splice(i+1,1),"break")}();if("break"===o)break}}else for(var d=0;d<n.length;d++)this.sentenceFlow[d][0].label=n[d]}else this.sentenceFlow=[]}}},methods:{setSentenceFlow:function(){var e=this;return Object(R["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.disabled=!0,t.next=3,e.generateSentenceFlow(e.sentence);case 3:e.sentenceFlow=t.sent,e.disabled=!1;case 5:case"end":return t.stop()}}),t)})))()}}};B.render=N;var q=B,G=(n("fb6a"),{class:"card"}),H={class:"card-content"},$={style:{"table-layout":"fixed",width:"100%"},class:"table"},X=Object(r["h"])("thead",null,[Object(r["h"])("th",{class:"hide-overflow"},"Token"),Object(r["h"])("th",{class:"hide-overflow"},"Parent")],-1),Y={key:0},K={class:"hide-overflow"},Q=Object(r["h"])("td",null," Root Node ",-1);function W(e,t,n,a,c,i){var l=Object(r["y"])("TokenTableRow");return Object(r["r"])(),Object(r["d"])("div",G,[Object(r["h"])("div",H,[Object(r["h"])("table",$,[X,Object(r["h"])("tbody",null,[(Object(r["r"])(!0),Object(r["d"])(r["a"],null,Object(r["x"])(a.sentenceFlow.slice(0,-1),(function(e,t){return Object(r["r"])(),Object(r["d"])(l,{onRowChange:i.updateSentence,label:e[0].label,id:e[0].id,value:e[0].parentId,index:t,key:t},null,8,["onRowChange","label","id","value","index"])})),128)),a.sentenceFlow.length>0?(Object(r["r"])(),Object(r["d"])("tr",Y,[Object(r["h"])("td",K,Object(r["A"])(a.sentenceFlow[a.sentenceFlow.length-1][0].label),1),Q])):Object(r["e"])("",!0)])])])])}var ee={class:"hide-overflow"},te={class:"select is-small is-fullwidth"},ne=Object(r["h"])("option",{value:-1},"None",-1);function re(e,t,n,a,c,i){return Object(r["r"])(),Object(r["d"])("tr",null,[Object(r["h"])("td",ee,Object(r["A"])(n.label),1),Object(r["h"])("td",null,[Object(r["h"])("div",te,[Object(r["F"])(Object(r["h"])("select",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.innerValue=e}),onChange:t[2]||(t[2]=function(){return i.onChange.apply(i,arguments)})},[ne,(Object(r["r"])(!0),Object(r["d"])(r["a"],null,Object(r["x"])(a.sentenceFlow.filter((function(e,t){return n.index<t})),(function(e){return Object(r["r"])(),Object(r["d"])("option",{key:e[0].id,value:e[0].id},Object(r["A"])(e[0].label),9,["value"])})),128))],544),[[r["C"],c.innerValue]])])])])}n("a9e3");var ae={setup:function(){var e=U(),t=e.sentenceFlow;return{sentenceFlow:t}},props:{label:{required:!0,type:String},id:{required:!0,type:Number},index:{required:!0,type:Number},value:{default:-1,type:Number}},data:function(){return{innerValue:this.value}},watch:{value:function(){this.innerValue=this.value}},methods:{onChange:function(){var e=this,t=this.sentenceFlow.findIndex((function(t){return t[0].id===e.innerValue}));this.$emit("row-change",{id:this.id,index:this.index,parentId:parseInt(this.innerValue),parentIndex:t})}}};ae.render=re;var ce=ae,ie={setup:function(){var e=U(),t=e.sentenceFlow,n=e.sortTokenChildren;return{sentenceFlow:t,sortTokenChildren:n}},components:{TokenTableRow:ce},methods:{updateSentence:function(e){var t=e.id,n=e.index,r=e.parentId,a=e.parentIndex;console.log("sentence updated");var c=this.sentenceFlow.flat();a>=0&&(c[a].children.push(t),this.sortTokenChildren(c[a]));var i=c.find((function(e){return c[n].parentId===e.id}));i&&(i.children=i.children.filter((function(e){return e!=t}))),c[n].parentId=r}}};n("c99d");ie.render=W;var le=ie,oe=Object(r["G"])("data-v-9cf4a9a2");Object(r["u"])("data-v-9cf4a9a2");var de={class:"card"},ue={style:{position:"static",height:"100%"},class:"card-content"},se={class:"svg-pan-zoom_viewport"},he={style:{position:"absolute",bottom:"1.5rem",left:"1.5rem"}},be={class:"control field is-grouped"},fe={class:"control field is-grouped"},pe=Object(r["h"])("div",{class:"is-size-7"},"*You can scroll to zoom on desktop",-1),ve={style:{position:"absolute",bottom:"1.5rem",right:"1.5rem"}};Object(r["s"])();var Oe=oe((function(e,t,n,a,c,i){var l=Object(r["y"])("flow-selector");return Object(r["r"])(),Object(r["d"])("div",de,[Object(r["h"])("div",ue,[Object(r["h"])(l,{style:{"max-width":"100%",position:"absolute",top:"1.5rem",right:"1.5rem"},onFlowChange:t[1]||(t[1]=function(e){c.selectedFlow=e})}),(Object(r["r"])(),Object(r["d"])("svg",{id:"flow-graph",ref:"svg",width:"100%",height:"max(".concat(i.treeData.layout.height,"px, 600px)")},[Object(r["h"])("g",se,[(Object(r["r"])(!0),Object(r["d"])(r["a"],null,Object(r["x"])(i.treeData.links,(function(e,t){return Object(r["r"])(),Object(r["d"])("path",{key:t,d:"M".concat(e.xt," ").concat(e.yt,"\n         L").concat(e.xb-16," ").concat(e.yt,"\n         A16 16 90 0 1 ").concat(e.xb," ").concat(e.yt+16,"\n         L").concat(e.xb," ").concat(e.ys-16,"\n         A16 16 90 0 0 ").concat(e.xb+16," ").concat(e.ys,"\n         L").concat(e.xs," ").concat(e.ys),fill:"none",stroke:"".concat(c.color(e.bundle.id)),"stroke-width":"2"},null,8,["d","stroke"])})),128)),(Object(r["r"])(!0),Object(r["d"])(r["a"],null,Object(r["x"])(i.treeData.nodes,(function(e,t){return Object(r["r"])(),Object(r["d"])(r["a"],{key:t},[Object(r["h"])("text",{x:e.x+2,y:e.y-14,dy:"0.35em",stroke:"white","stroke-width":"4"},Object(r["A"])(e.label),9,["x","y"]),Object(r["h"])("line",{"stroke-linecap":"round",stroke:"black","stroke-width":"8",x1:e.x,y1:e.y,x2:e.x,y2:e.y},null,8,["x1","y1","x2","y2"]),Object(r["h"])("line",{"stroke-linecap":"round",stroke:"white","stroke-width":"4",x1:e.x,y1:e.y,x2:e.x,y2:e.y},null,8,["x1","y1","x2","y2"]),Object(r["h"])("text",{x:e.x+2,y:e.y-14,dy:"0.35em"},Object(r["A"])(e.label),9,["x","y"])],64)})),128))])],8,["height"])),Object(r["h"])("div",he,[Object(r["h"])("div",be,[Object(r["h"])("button",{class:"button control is-small",onClick:t[2]||(t[2]=function(t){return e.panZoom?e.panZoom.center():null})}," Center "),Object(r["h"])("button",{class:"button control is-small",onClick:t[3]||(t[3]=function(t){return e.panZoom?e.panZoom.fit():null})}," Fit ")]),Object(r["h"])("div",fe,[Object(r["h"])("button",{class:"button control is-small",onClick:t[4]||(t[4]=function(t){return e.panZoom?e.panZoom.zoomIn():null})}," Zoom In "),Object(r["h"])("button",{class:"button control is-small",onClick:t[5]||(t[5]=function(t){return e.panZoom?e.panZoom.zoomOut():null})}," Zoom Out ")]),pe]),Object(r["h"])("div",ve,[Object(r["h"])("button",{class:"button control is-small",onClick:t[6]||(t[6]=function(){return a.downloadSvg.apply(a,arguments)})}," Download PNG ")])])])})),je=(n("b64b"),n("5319"),n("2b3d"),n("5530")),ke=n("f8f9"),we=n.n(ke),me=n("c8b5"),ge=n.n(me),ye=void 0,xe=function(e){var t=Object(r["w"])(null),n=Object(r["w"])(1),a=Object(r["w"])(null);return Object(r["p"])((function(){t.value=we()(e.value),a.value=ge()(e.value,{inputClass:ge.a.SUPPORT_POINTER_EVENTS?ge.a.PointerEventInput:ge.a.TouchInput}),a.value.get("pinch").set({enable:!0}),a.value.on("doubletap",(function(e){t.value.zoomIn()})),a.value.on("pinchstart pinchmove",(function(e){"pinchstart"===e.type&&(n.value=t.value.getZoom(),ye.panZoom.zoomAtPoint(ye.initialScale*e.scale,{x:e.center.x,y:e.center.y})),t.value.zoomAtPoint(n.value*e.scale,{x:e.center.x,y:e.center.y})}))})),{panZoom:t,initialScale:n,hammer:a}},Ie=n("df19"),Fe=n("24cb"),Se={class:"select"},Ce=Object(r["h"])("option",{value:1}," Compacted Sentence Flow ",-1),Ee=Object(r["h"])("option",{value:0}," Sentence Flow ",-1),Te=Object(r["h"])("option",{value:2}," Levels Flow ",-1);function Ae(e,t){return Object(r["r"])(),Object(r["d"])("div",Se,[Object(r["h"])("select",{onChange:t[1]||(t[1]=function(t){return e.$emit("flow-change",t.target.value)})},[Ce,Ee,Te],32)])}const De={};De.render=Ae;var _e=De,ze={components:{FlowSelector:_e},setup:function(){var e=U(),t=Object(r["w"])(null),n=Object(r["w"])(null),a=function(){var e=document.createElement("canvas"),n=t.value.cloneNode(!0),r=t.value.firstChild.getBBox(),a=r.x+r.width+r.x,c=r.y+r.height+r.y+4;n.setAttribute("width",a),n.setAttribute("height",c),n.firstChild.setAttribute("style",""),n.firstChild.setAttribute("transform","");var i=e.getContext("2d"),l=8,o=8;e.width=a+2*l,e.height=c+2*o,i.fillStyle="white",i.fillRect(0,0,e.width,e.height);var d=window.URL||window.webkitURL||window,u=new Image,s=new XMLSerializer,h=s.serializeToString(n),b=new Blob([h],{type:"image/svg+xml;charset=utf-8"}),f=d.createObjectURL(b);u.onload=function(){i.drawImage(u,l,o),d.revokeObjectURL(f);var t=e.toDataURL("image/png").replace("image/png","image/octet-stream"),n=new MouseEvent("click",{view:window,bubbles:!1,cancelable:!0}),r=document.createElement("a");r.setAttribute("download","dependency_diagram.png"),r.setAttribute("href",t),r.setAttribute("target","_blank"),r.dispatchEvent(n)},u.src=f};return Object(je["a"])(Object(je["a"])(Object(je["a"])({},e),xe(t)),{},{svg:t,insert:n,downloadSvg:a})},data:function(){return{color:Object(Ie["a"])(Fe["a"]),selectedFlow:1}},computed:{currentFlow:function(){switch(parseInt(this.selectedFlow)){case 1:return this.compactedSentenceFlow;case 2:return this.levelsFlow;case 0:default:return this.sentenceFlow}},treeData:function(){var e=JSON.parse(JSON.stringify(this.currentFlow));e.forEach((function(e,t){return e.forEach((function(e){return e.level=t}))}));var t=e.reduce((function(e,t){return e.concat(t)}),[]),n={};t.forEach((function(e){return n[e.id]=e})),t.forEach((function(e){e.children=(void 0===e.children?[]:e.children).map((function(e){return n[e]}))})),e.forEach((function(e,t){var n={};e.forEach((function(e){if(0!=e.children.length){var r=e.children.map((function(e){return e.id})).sort().join("--");r in n?n[r].children=n[r].children.concat(e.children):n[r]={id:r,children:e.children.slice(),level:t},e.bundle=n[r]}})),e.bundles=Object.keys(n).map((function(e){return n[e]})),e.bundles.forEach((function(e,t){return e.i=t}))}));var r=[];t.forEach((function(e){e.children.forEach((function(t){return r.push({source:e,bundle:e.bundle,target:t})}))}));var a=e.reduce((function(e,t){return e.concat(t.bundles)}),[]),c=32,i=80,l=16,o=25,d=0,u=0;e.forEach((function(e){d+=e.bundles.length*l,u+=o,e.forEach((function(e,t){e.x=e.level*i+d+c/2,e.y=t*c+u})),u+=e.length*c}));var s=0;e.forEach((function(e){e.bundles.forEach((function(t){t.x=t.children[0].x+i+(e.bundles.length-1-t.i)*l,t.y=s*c})),s+=e.length})),r.forEach((function(e){e.xt=e.target.x,e.yt=e.target.y,e.xb=e.bundle.x,e.yb=e.bundle.y,e.xs=e.source.x,e.ys=e.source.y}));var h={height:t.length*c+e.length*o,node_height:c,node_width:i,bundle_width:l};return{levels:e,nodes:t,nodes_index:n,links:r,bundles:a,layout:h}}},watch:{sentenceFlowString:function(){0!==this.sentenceFlow.length&&this.$nextTick((function(){this.panZoom=we()("#flow-graph"),this.panZoom.updateBBox(),this.panZoom.resize()}))}}};n("1a3c");ze.render=Oe,ze.__scopeId="data-v-9cf4a9a2";var Pe=ze,Ne={name:"Home",components:{SentenceInput:q,TokenTable:le,DependencyVisualizer:Pe}};Ne.render=D;var Re=Ne,Ze=[{path:"/",name:"Home",component:Re},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))}}],Ve=Object(m["a"])({history:Object(m["b"])("/japanese-dependency-visualizer/"),routes:Ze}),Le=Ve,Je=n("5502"),Me=Object(Je["a"])({state:{},getters:{},mutations:{},actions:{},modules:{}});n("f843");Object(r["c"])(w).use(Me).use(Le).mount("#app")},5976:function(e,t,n){},"907d":function(e,t,n){},9574:function(e,t,n){"use strict";n("9670")},9670:function(e,t,n){},"98e5":function(e,t,n){},ae54:function(e,t,n){e.exports=n.p+"img/santathomas.02c5e5b4.png"},c99d:function(e,t,n){"use strict";n("98e5")},f843:function(e,t,n){}});
//# sourceMappingURL=app.83a6fe37.js.map