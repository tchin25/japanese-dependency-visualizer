{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/DependencyVisualizer.vue?8193","webpack:///./src/components/TheHeader.vue?f8b0","webpack:///./src/App.vue","webpack:///./src/components/TheHeader.vue","webpack:///./src/components/TheHeader.vue?9cd7","webpack:///./src/App.vue?97f5","webpack:///./src/views/Home.vue","webpack:///./src/components/SentenceInput.vue","webpack:///./src/example-sentences.js","webpack:///./src/api/sentenceFlow.js","webpack:///./src/components/SentenceInput.vue?8bfe","webpack:///./src/components/TokenTable.vue","webpack:///./src/components/TokenTableRow.vue","webpack:///./src/components/TokenTableRow.vue?9a70","webpack:///./src/components/TokenTable.vue?d826","webpack:///./src/components/DependencyVisualizer.vue","webpack:///./src/composition/initiateDraggable.js","webpack:///./src/components/FlowSelector.vue","webpack:///./src/components/FlowSelector.vue?0fd3","webpack:///./src/components/DependencyVisualizer.vue?0442","webpack:///./src/views/Home.vue?c772","webpack:///./src/router/index.js","webpack:///./src/store/index.js","webpack:///./src/main.js","webpack:///./src/App.vue?84fd","webpack:///./src/assets/santathomas.png","webpack:///./src/components/TokenTable.vue?d988"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","jsonpScriptSrc","p","exports","module","l","e","promises","installedChunkData","promise","Promise","resolve","reject","onScriptComplete","script","document","createElement","charset","timeout","nc","setAttribute","src","error","Error","event","onerror","onload","clearTimeout","chunk","errorType","type","realSrc","target","message","name","request","undefined","setTimeout","head","appendChild","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","err","console","jsonpArray","window","oldJsonpFunction","slice","class","role","aria-label","aria-hidden","isActive","aria-expanded","data-target","id","to","render","__scopeId","components","TheHeader","style","href","placeholder","sentence","disabled","setSentenceFlow","levels","label","children","parentId","readable","readable_c","xml","levels2","readable2","readable2_c","generateSentenceFlow","split","join","endpoint","fetch","then","res","text","domParser","DOMParser","parseFromString","flow","tokens","getElementsByTagName","token","el","textContent","forEach","trim","parseInt","getAttribute","level","sort","a","b","sentenceFlow","ref","exampleSentences","useState","sentenceFlowString","computed","JSON","stringify","levelsFlow","parse","unshift","k","child","find","compactedSentenceFlow","levelDependency","Set","currentToken","add","has","clear","sortTokenChildren","tokenObject","flattened","flat","aIndex","findIndex","bIndex","setup","this","map","set","tokenized","diff","Math","abs","reduce","max","toDelete","childId","formerParent","filter","toSave","formerParentId","concat","methods","index","updateSentence","innerValue","onChange","props","required","String","Number","default","watch","parentIndex","$emit","TokenTableRow","log","width","height","treeData","layout","links","fill","stroke","color","bundle","stroke-width","nodes","x","y","dy","stroke-linecap","x1","y1","x2","y2","panZoom","center","fit","zoomIn","zoomOut","downloadSvg","svgElementRef","initialScale","hammer","onMounted","svgPanZoom","Hammer","inputClass","SUPPORT_POINTER_EVENTS","PointerEventInput","TouchInput","enable","on","ev","getZoom","zoomAtPoint","scale","$event","FlowSelector","svg","insert","canvas","svgClone","cloneNode","bbox","firstChild","getBBox","ctx","getContext","paddingX","paddingY","fillStyle","fillRect","DOMURL","URL","webkitURL","img","Image","XMLSerializer","imageData","serializeToString","svgBlob","Blob","url","createObjectURL","drawImage","revokeObjectURL","imgURI","toDataURL","replace","evt","MouseEvent","view","bubbles","cancelable","dispatchEvent","initiateDraggable","selectedFlow","currentFlow","nodes_index","bundles","keys","source","node_height","node_width","bundle_width","level_y_padding","x_offset","y_offset","xt","yt","xb","yb","xs","ys","$nextTick","updateBBox","resize","SentenceInput","TokenTable","DependencyVisualizer","routes","path","component","Home","router","createRouter","history","createWebHashHistory","process","createStore","state","getters","mutations","actions","createApp","App","use","store","mount"],"mappings":"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","file":"js/app.83a6fe37.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({\"about\":\"about\"}[chunkId]||chunkId) + \".\" + {\"about\":\"45a3c501\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/japanese-dependency-visualizer/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./DependencyVisualizer.vue?vue&type=style&index=0&id=9cf4a9a2&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./TheHeader.vue?vue&type=style&index=0&id=661dc26a&scoped=true&lang=scss\"","<template>\n  <the-header />\n  <router-view />\n</template>\n<script>\nimport TheHeader from \"@/components/TheHeader\";\n\nexport default {\n  components: { TheHeader },\n};\n</script>\n\n<style lang=\"scss\">\n#app {\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n</style>\n","<template>\r\n  <nav class=\"navbar\" role=\"navigation\" aria-label=\"main navigation\">\r\n    <div class=\"navbar-brand\">\r\n      <h1 class=\"navbar-item title mb-0 is-hidden-touch\">\r\n        Japanese Dependency Visualizer\r\n      </h1>\r\n      <h1 class=\"navbar-item mb-0 is-hidden-desktop\">\r\n        Japanese Dependency Visualizer\r\n      </h1>\r\n\r\n      <a\r\n        role=\"button\"\r\n        class=\"navbar-burger burger\"\r\n        :class=\"isActive ? 'is-active' : ''\"\r\n        aria-label=\"menu\"\r\n        aria-expanded=\"false\"\r\n        data-target=\"navbarItems\"\r\n        @click=\"isActive = !isActive\"\r\n      >\r\n        <span aria-hidden=\"true\"></span>\r\n        <span aria-hidden=\"true\"></span>\r\n        <span aria-hidden=\"true\"></span>\r\n      </a>\r\n    </div>\r\n\r\n    <div\r\n      id=\"navbarItems\"\r\n      class=\"navbar-menu\"\r\n      :class=\"isActive ? 'is-active' : ''\"\r\n    >\r\n      <div class=\"navbar-end\">\r\n        <router-link to=\"/\" class=\"navbar-item\">Home</router-link>\r\n        <router-link to=\"/about\" class=\"navbar-item\">About</router-link>\r\n      </div>\r\n    </div>\r\n  </nav>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      isActive: false,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.navbar {\r\n  border-bottom: 1px solid lightgray;\r\n}\r\n</style>\r\n","import { render } from \"./TheHeader.vue?vue&type=template&id=661dc26a&scoped=true\"\nimport script from \"./TheHeader.vue?vue&type=script&lang=js\"\nexport * from \"./TheHeader.vue?vue&type=script&lang=js\"\n\nimport \"./TheHeader.vue?vue&type=style&index=0&id=661dc26a&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-661dc26a\"\n\nexport default script","import { render } from \"./App.vue?vue&type=template&id=006d8b32\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=006d8b32&lang=scss\"\nscript.render = render\n\nexport default script","<template>\n  <div class=\"section\">\n    <div class=\"container\">\n      <SentenceInput />\n    </div>\n  </div>\n  <div class=\"section pt-0\">\n    <div class=\"container\">\n      <div style=\"width: 100%\" class=\"columns ml-0\">\n        <div class=\"column is-one-fifth\">\n          <TokenTable style=\"height: 100%\" />\n        </div>\n        <div class=\"column\">\n          <DependencyVisualizer />\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=\"footer-wrapper\">\n    <footer class=\"footer\">\n      <div class=\"level\">\n        <div class=\"level-left\">\n          <figure class=\"image is-64x64\">\n            <img class=\"is-rounded\" src=\"@/assets/santathomas.png\" />\n          </figure>\n          <h1 class=\"title is-4 ml-2\">\n            A side project by\n            <a href=\"https://thomasch.in/\">\n              Thomas Chin\n            </a>\n          </h1>\n        </div>\n      </div>\n    </footer>\n  </div>\n</template>\n\n<script>\n// @ is an alias to /src\nimport SentenceInput from \"@/components/SentenceInput.vue\";\nimport TokenTable from \"@/components/TokenTable.vue\";\nimport DependencyVisualizer from \"@/components/DependencyVisualizer.vue\";\n\nexport default {\n  name: \"Home\",\n  components: { SentenceInput, TokenTable, DependencyVisualizer },\n};\n</script>\n","<template>\r\n  <div class=\"field has-addons\">\r\n    <div class=\"control is-expanded\">\r\n      <input class=\"input\" type=\"text\" placeholder=\"Input\" v-model=\"sentence\" />\r\n    </div>\r\n    <div class=\"control\">\r\n      <button\r\n        class=\"button is-primary\"\r\n        :class=\"disabled ? 'is-loading' : ''\"\r\n        type=\"submit\"\r\n        value=\"Submit\"\r\n        :disabled=\"disabled\"\r\n        @click=\"setSentenceFlow\"\r\n      >\r\n        Auto-Generate Flow\r\n      </button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { useState, generateSentenceFlow } from \"@/api/sentenceFlow\";\r\n\r\nexport default {\r\n  setup() {\r\n    const { sentenceFlow, sortTokenChildren } = useState();\r\n    return { sentenceFlow, sortTokenChildren, generateSentenceFlow };\r\n  },\r\n  data() {\r\n    return {\r\n      disabled: false,\r\n    };\r\n  },\r\n  computed: {\r\n    sentence: {\r\n      get() {\r\n        return this.sentenceFlow\r\n          .flat()\r\n          .map((token) => token.label)\r\n          .join(\"|\");\r\n      },\r\n      set(value) {\r\n        // TODO: Make this code less cursed\r\n\r\n        if (value === \"\") {\r\n          this.sentenceFlow = [];\r\n          return;\r\n        }\r\n\r\n        let tokenized = value.split(\"|\");\r\n\r\n        // Attempt to preverve metadata of tokens\r\n        // Only works for single-token changes\r\n        const diff = tokenized.length - this.sentenceFlow.length;\r\n\r\n        // If change is more than a single token, reset everything\r\n        if (Math.abs(diff) !== 1 && diff !== 0) {\r\n          this.sentenceFlow = [];\r\n          tokenized.forEach((token, i) => {\r\n            this.sentenceFlow.push([\r\n              {\r\n                id: i,\r\n                label: token,\r\n                children: [],\r\n                parentId: -1,\r\n              },\r\n            ]);\r\n          });\r\n          return;\r\n        }\r\n\r\n        if (diff === 1) {\r\n          if (tokenized.length === 1) {\r\n            this.sentenceFlow.push([\r\n              {\r\n                id: 0,\r\n                label: tokenized[0],\r\n                children: [],\r\n                parentId: -1,\r\n              },\r\n            ]);\r\n            return;\r\n          }\r\n\r\n          // Get id for new token\r\n          const id =\r\n            this.sentenceFlow.reduce(\r\n              (max, el) => (el[0].id > max ? el[0].id : max),\r\n              -1\r\n            ) + 1;\r\n\r\n          for (let i = 0; i < tokenized.length; i++) {\r\n            // If the new token is at the end\r\n            if (i === this.sentenceFlow.length) {\r\n              this.sentenceFlow.push([\r\n                {\r\n                  id,\r\n                  label: tokenized[i],\r\n                  children: [],\r\n                  parentId: -1,\r\n                },\r\n              ]);\r\n              break;\r\n            }\r\n\r\n            // Insert new token between old ones\r\n            if (this.sentenceFlow[i][0].label !== tokenized[i]) {\r\n              this.sentenceFlow.splice(i, 0, [\r\n                { id, label: tokenized[i], children: [], parentId: -1 },\r\n              ]);\r\n              this.sentenceFlow[i + 1][0].label = tokenized[i + 1];\r\n              break;\r\n            }\r\n          }\r\n        } else if (diff === -1) {\r\n          // If token was deleted, destroy all links and shift array\r\n          // If tokenizer between tokens was deleted, merge tokens\r\n          // If the token at the end was deleted, sets new last token as root\r\n\r\n          for (let i = 0; i < this.sentenceFlow.length - 1; i++) {\r\n            // Token was deleted\r\n            if (\r\n              this.sentenceFlow[i][0].label !== tokenized[i] &&\r\n              this.sentenceFlow[i + 1][0].label === tokenized[i]\r\n            ) {\r\n              const toDelete = this.sentenceFlow[i][0];\r\n\r\n              // Sets parentId of orphaned children\r\n              toDelete.children.forEach((childId) => {\r\n                let child = this.sentenceFlow.find(\r\n                  (el) => el[0].id === childId\r\n                )[0];\r\n                if (child) {\r\n                  child.parentId = -1;\r\n                }\r\n              });\r\n              const formerParent = this.sentenceFlow.find(\r\n                (el) => el[0].id === toDelete.parentId\r\n              );\r\n\r\n              if (formerParent) {\r\n                formerParent[0].children = formerParent[0].children.filter(\r\n                  (el) => el != toDelete.id\r\n                );\r\n              }\r\n\r\n              this.sentenceFlow.splice(i, 1);\r\n              return;\r\n            }\r\n\r\n            // Tokenizer was deleted and have to merge two tokens together\r\n            if (\r\n              this.sentenceFlow[i][0].label !== tokenized[i] ||\r\n              i === tokenized.length - 1\r\n            ) {\r\n              const toSave = this.sentenceFlow[i][0];\r\n              const toDelete = this.sentenceFlow[i + 1][0];\r\n\r\n              // Detect between removing last token vs merging it\r\n              if (i === tokenized.length - 1) {\r\n                // This is to fix the issue that a|b|c removing |c returns a|bc instead of a|b\r\n                if (this.sentenceFlow[i][0].label === tokenized[i]) {\r\n                  toDelete.label = \"\";\r\n                }\r\n              }\r\n\r\n              // Filter for edge case where toSave was child of toDelete\r\n              toDelete.children = toDelete.children.filter(\r\n                (el) => el !== toSave.id\r\n              );\r\n\r\n              // Merges Label\r\n              toSave.label += toDelete.label;\r\n\r\n              // Delete child from former parent\r\n              const formerParentId = toDelete.parentId;\r\n              const childId = toDelete.id;\r\n              const formerParent = this.sentenceFlow.find(\r\n                (el) => el[0].id === formerParentId\r\n              );\r\n\r\n              if (formerParent) {\r\n                formerParent[0].children = formerParent[0].children.filter(\r\n                  (el) => el != childId\r\n                );\r\n\r\n                // Add newly merged token as child of former token\r\n                let child = formerParent[0].children.findIndex(\r\n                  (el) => el === toSave.id\r\n                );\r\n                if (child < 0) {\r\n                  formerParent[0].children.push(toSave.id);\r\n                  this.sortTokenChildren(formerParent[0]);\r\n                }\r\n              }\r\n\r\n              // Update parent\r\n              toSave.parentId = toDelete.parentId;\r\n\r\n              // Combines children and sorts\r\n              toSave.children = toSave.children.concat(toDelete.children);\r\n              this.sortTokenChildren(toSave);\r\n\r\n              // Sets parentId of orphaned children\r\n              toDelete.children.forEach((childId) => {\r\n                let child = this.sentenceFlow.find(\r\n                  (el) => el[0].id === childId\r\n                )[0];\r\n                if (child) {\r\n                  child.parentId = toSave.id;\r\n                }\r\n              });\r\n\r\n              // Delete merged token\r\n              if (i === tokenized.length) {\r\n                this.sentenceFlow.splice(i, 1);\r\n                break;\r\n              }\r\n              this.sentenceFlow.splice(i + 1, 1);\r\n              break;\r\n            }\r\n          }\r\n        } else {\r\n          for (let i = 0; i < tokenized.length; i++) {\r\n            this.sentenceFlow[i][0].label = tokenized[i];\r\n          }\r\n        }\r\n      },\r\n    },\r\n  },\r\n  methods: {\r\n    async setSentenceFlow() {\r\n      this.disabled = true;\r\n      this.sentenceFlow = await this.generateSentenceFlow(this.sentence);\r\n      this.disabled = false;\r\n    },\r\n  },\r\n};\r\n</script>\r\n","export default {\r\n  levels: [\r\n    // Levels From Root\r\n    [{ id: 0, label: \"店内に\", children: [], parentId: 1 }],\r\n    [\r\n      { id: 1, label: \"散らばっている\", children: [0], parentId: 3 },\r\n      { id: 2, label: \"無数の\", children: [], parentId: 3 },\r\n    ],\r\n    [\r\n      { id: 3, label: \"音たちから\", children: [2, 1], parentId: 5 },\r\n      { id: 4, label: \"情報を\", children: [], parentId: 5 },\r\n      { id: 6, label: \"私の\", children: [], parentId: 7 },\r\n      { id: 8, label: \"納品されたばかりの\", children: [], parentId: 9 },\r\n    ],\r\n    [\r\n      { id: 5, label: \"拾いながら、\", children: [4, 3], parentId: 10 },\r\n      { id: 7, label: \"身体は\", children: [6], parentId: 10 },\r\n      { id: 9, label: \"おにぎりを\", children: [8], parentId: 10 },\r\n    ],\r\n    [{ id: 10, label: \"並べている\", children: [9, 7, 5], parentId: -1 }],\r\n  ],\r\n  readable: [\r\n    // Readable Sentence Flow\r\n    [{ id: 0, label: \"店内に\", children: [], parentId: 1 }],\r\n    [{ id: 1, label: \"散らばっている\", children: [0], parentId: 3 }],\r\n    [{ id: 2, label: \"無数の\", children: [], parentId: 3 }],\r\n    [{ id: 3, label: \"音たちから\", children: [2, 1], parentId: 5 }],\r\n    [{ id: 4, label: \"情報を\", children: [], parentId: 5 }],\r\n    [{ id: 5, label: \"拾いながら、\", children: [4, 3], parentId: 10 }],\r\n    [{ id: 6, label: \"私の\", children: [], parentId: 7 }],\r\n    [{ id: 7, label: \"身体は\", children: [6], parentId: 10 }],\r\n    [{ id: 8, label: \"納品されたばかりの\", children: [], parentId: 9 }],\r\n    [{ id: 9, label: \"おにぎりを\", children: [8], parentId: 10 }],\r\n    [{ id: 10, label: \"並べている\", children: [9, 7, 5], parentId: -1 }],\r\n  ],\r\n  readable_c: [\r\n    // Compacted Readable Sentence Flow\r\n    [{ id: 0, label: \"店内に\", children: [], parentId: 1 }],\r\n    [\r\n      { id: 1, label: \"散らばっている\", children: [0], parentId: 3 },\r\n      { id: 2, label: \"無数の\", children: [], parentId: 3 },\r\n    ],\r\n    [\r\n      { id: 3, label: \"音たちから\", children: [2, 1], parentId: 5 },\r\n      { id: 4, label: \"情報を\", children: [], parentId: 5 },\r\n    ],\r\n    [\r\n      { id: 5, label: \"拾いながら、\", children: [4, 3], parentId: 10 },\r\n      { id: 6, label: \"私の\", children: [], parentId: 7 },\r\n    ],\r\n    [\r\n      { id: 7, label: \"身体は\", children: [6], parentId: 10 },\r\n      { id: 8, label: \"納品されたばかりの\", children: [], parentId: 9 },\r\n    ],\r\n    [{ id: 9, label: \"おにぎりを\", children: [8], parentId: 10 }],\r\n    [{ id: 10, label: \"並べている\", children: [9, 7, 5], parentId: -1 }],\r\n  ],\r\n  xml: `<sentence>\r\n  <chunk id=\"0\" link=\"1\" rel=\"D\" score=\"1.894732\" head=\"0\" func=\"1\">\r\n   <tok id=\"0\" feature=\"名詞,一般,*,*,*,*,店内,テンナイ,テンナイ\">店内</tok>\r\n   <tok id=\"1\" feature=\"助詞,格助詞,一般,*,*,*,に,ニ,ニ\">に</tok>\r\n  </chunk>\r\n  <chunk id=\"1\" link=\"3\" rel=\"D\" score=\"1.344092\" head=\"2\" func=\"4\">\r\n   <tok id=\"2\" feature=\"動詞,自立,*,*,五段・ラ行,連用タ接続,散らばる,チラバッ,チラバッ\">散らばっ</tok>\r\n   <tok id=\"3\" feature=\"助詞,接続助詞,*,*,*,*,て,テ,テ\">て</tok>\r\n   <tok id=\"4\" feature=\"動詞,非自立,*,*,一段,基本形,いる,イル,イル\">いる</tok>\r\n  </chunk>\r\n  <chunk id=\"2\" link=\"3\" rel=\"D\" score=\"1.512923\" head=\"5\" func=\"6\">\r\n   <tok id=\"5\" feature=\"名詞,一般,*,*,*,*,無数,ムスウ,ムスー\">無数</tok>\r\n   <tok id=\"6\" feature=\"助詞,連体化,*,*,*,*,の,ノ,ノ\">の</tok>\r\n  </chunk>\r\n  <chunk id=\"3\" link=\"5\" rel=\"D\" score=\"1.120838\" head=\"8\" func=\"9\">\r\n   <tok id=\"7\" feature=\"名詞,一般,*,*,*,*,音,オト,オト\">音</tok>\r\n   <tok id=\"8\" feature=\"名詞,接尾,一般,*,*,*,たち,タチ,タチ\">たち</tok>\r\n   <tok id=\"9\" feature=\"助詞,格助詞,一般,*,*,*,から,カラ,カラ\">から</tok>\r\n  </chunk>\r\n  <chunk id=\"4\" link=\"5\" rel=\"D\" score=\"2.817956\" head=\"10\" func=\"11\">\r\n   <tok id=\"10\" feature=\"名詞,一般,*,*,*,*,情報,ジョウホウ,ジョーホー\">情報</tok>\r\n   <tok id=\"11\" feature=\"助詞,格助詞,一般,*,*,*,を,ヲ,ヲ\">を</tok>\r\n  </chunk>\r\n  <chunk id=\"5\" link=\"10\" rel=\"D\" score=\"-1.516635\" head=\"12\" func=\"13\">\r\n   <tok id=\"12\" feature=\"動詞,自立,*,*,五段・ワ行促音便,連用形,拾う,ヒロイ,ヒロイ\">拾い</tok>\r\n   <tok id=\"13\" feature=\"助詞,接続助詞,*,*,*,*,ながら,ナガラ,ナガラ\">ながら</tok>\r\n   <tok id=\"14\" feature=\"記号,読点,*,*,*,*,、,、,、\">、</tok>\r\n  </chunk>\r\n  <chunk id=\"6\" link=\"7\" rel=\"D\" score=\"1.768437\" head=\"15\" func=\"16\">\r\n   <tok id=\"15\" feature=\"名詞,代名詞,一般,*,*,*,私,ワタシ,ワタシ\">私</tok>\r\n   <tok id=\"16\" feature=\"助詞,連体化,*,*,*,*,の,ノ,ノ\">の</tok>\r\n  </chunk>\r\n  <chunk id=\"7\" link=\"10\" rel=\"D\" score=\"-1.516635\" head=\"17\" func=\"18\">\r\n   <tok id=\"17\" feature=\"名詞,一般,*,*,*,*,身体,シンタイ,シンタイ\">身体</tok>\r\n   <tok id=\"18\" feature=\"助詞,係助詞,*,*,*,*,は,ハ,ワ\">は</tok>\r\n  </chunk>\r\n  <chunk id=\"8\" link=\"9\" rel=\"D\" score=\"1.672161\" head=\"20\" func=\"24\">\r\n   <tok id=\"19\" feature=\"名詞,サ変接続,*,*,*,*,納品,ノウヒン,ノーヒン\">納品</tok>\r\n   <tok id=\"20\" feature=\"動詞,自立,*,*,サ変・スル,未然レル接続,する,サ,サ\">さ</tok>\r\n   <tok id=\"21\" feature=\"動詞,接尾,*,*,一段,連用形,れる,レ,レ\">れ</tok>\r\n   <tok id=\"22\" feature=\"助動詞,*,*,*,特殊・タ,基本形,た,タ,タ\">た</tok>\r\n   <tok id=\"23\" feature=\"助詞,副助詞,*,*,*,*,ばかり,バカリ,バカリ\">ばかり</tok>\r\n   <tok id=\"24\" feature=\"助詞,連体化,*,*,*,*,の,ノ,ノ\">の</tok>\r\n  </chunk>\r\n  <chunk id=\"9\" link=\"10\" rel=\"D\" score=\"-1.516635\" head=\"25\" func=\"26\">\r\n   <tok id=\"25\" feature=\"名詞,一般,*,*,*,*,おにぎり,オニギリ,オニギリ\">おにぎり</tok>\r\n   <tok id=\"26\" feature=\"助詞,格助詞,一般,*,*,*,を,ヲ,ヲ\">を</tok>\r\n  </chunk>\r\n  <chunk id=\"10\" link=\"-1\" rel=\"D\" score=\"0.000000\" head=\"27\" func=\"29\">\r\n   <tok id=\"27\" feature=\"動詞,自立,*,*,一段,連用形,並べる,ナラベ,ナラベ\">並べ</tok>\r\n   <tok id=\"28\" feature=\"助詞,接続助詞,*,*,*,*,て,テ,テ\">て</tok>\r\n   <tok id=\"29\" feature=\"動詞,非自立,*,*,一段,基本形,いる,イル,イル\">いる</tok>\r\n  </chunk>\r\n </sentence>`,\r\n  levels2: [\r\n    // Levels From Root\r\n    [\r\n      { id: 0, label: \"彼は\", children: [], parentId: 3 },\r\n      { id: 1, label: \"マクで\", children: [], parentId: 3 },\r\n      { id: 2, label: \"昼ご飯を\", children: [], parentId: 3 },\r\n    ],\r\n    [{ id: 3, label: \"食べます。\", children: [2, 1, 0], parentId: -1 }],\r\n  ],\r\n  readable2: [\r\n    //  Readable Sentence Flow\r\n    [{ id: 0, label: \"彼は\", children: [], parentId: 3 }],\r\n    [{ id: 1, label: \"マクで\", children: [], parentId: 3 }],\r\n    [{ id: 2, label: \"昼ご飯を\", children: [], parentId: 3 }],\r\n    [{ id: 3, label: \"食べます。\", children: [2, 1, 0], parentId: -1 }],\r\n  ],\r\n  readable2_c: [\r\n    // Compacted Readable Sentence Flow\r\n    [\r\n      { id: 0, label: \"彼は\", children: [], parentId: 3 },\r\n      { id: 1, label: \"マクで\", children: [], parentId: 3 },\r\n      { id: 2, label: \"昼ご飯を\", children: [], parentId: 3 },\r\n    ],\r\n    [{ id: 3, label: \"食べます。\", children: [2, 1, 0], parentId: -1 }],\r\n  ],\r\n};\r\n","import { ref, computed } from \"vue\";\r\nimport exampleSentences from \"@/example-sentences\";\r\n\r\nexport const generateSentenceFlow = async (sentence) => {\r\n  if (!sentence) {\r\n    return [];\r\n  }\r\n\r\n  // Reset sentence if flow was previously generated\r\n  sentence = sentence.split(\"|\").join(\"\");\r\n\r\n  const endpoint = \"https://cabocha-nke3uh5gza-uc.a.run.app/\";\r\n  try {\r\n    let res = await fetch(endpoint + sentence).then((res) => res.text());\r\n    let domParser = new DOMParser();\r\n    let xml = domParser.parseFromString(res, \"text/xml\");\r\n\r\n    let flow = [];\r\n\r\n    let tokens = xml.getElementsByTagName(\"chunk\");\r\n    for (let i = 0; i < tokens.length; i++) {\r\n      let token = {};\r\n      let el = tokens[i];\r\n\r\n      let text = el.textContent.split(\"\\n\");\r\n      token.label = \"\";\r\n      text.forEach((s) => {\r\n        token.label += s.trim();\r\n      });\r\n\r\n      token.id = parseInt(el.getAttribute(\"id\"));\r\n      token.parentId = parseInt(el.getAttribute(\"link\"));\r\n      token.children = [];\r\n      flow.push([token]);\r\n    }\r\n\r\n    // Link parent to child using parentIndex, which right now is parentId\r\n    flow.forEach((level) => {\r\n      const { id, parentId } = level[0];\r\n      // Add child to parent\r\n      if (parentId >= 0) {\r\n        flow[parentId][0].children.push(id);\r\n      }\r\n    });\r\n\r\n    flow.forEach((level) => {\r\n      let token = level[0];\r\n      // Sort children descending order\r\n      token.children.sort((a, b) => b - a);\r\n    });\r\n    // console.log(flow);\r\n    return flow;\r\n  } catch (e) {\r\n    // console.error(e);\r\n    return [\r\n      [\r\n        {\r\n          id: 0,\r\n          label: sentence,\r\n          children: [],\r\n          parentId: -1,\r\n        },\r\n      ],\r\n    ];\r\n  }\r\n};\r\n\r\nconst sentenceFlow = ref(exampleSentences.readable);\r\n\r\nexport const useState = () => {\r\n  const sentenceFlowString = computed(() => JSON.stringify(sentenceFlow.value));\r\n\r\n  // Organized flow into levels from root\r\n  const levelsFlow = computed(() => {\r\n    if (sentenceFlow.value.length === 0) {\r\n      return [];\r\n    }\r\n\r\n    // Deep clone array so our modifications don't recursively retrigger computation\r\n    let readable = JSON.parse(JSON.stringify(sentenceFlow.value));\r\n    // console.log(sentenceFlow.value);\r\n    let flow = [];\r\n\r\n    flow.unshift([]);\r\n    // Root and unlinked nodes will be at the first level\r\n    for (let i = 0; i < readable.length; i++) {\r\n      if (readable[i][0].parentId === -1) {\r\n        flow[0].push(readable[i][0]);\r\n      }\r\n    }\r\n\r\n    // console.log(flow);\r\n\r\n    for (let i = 0; i < flow.length; i++) {\r\n      // Children of current level\r\n      let children = [];\r\n\r\n      // Iterate through every token in each level\r\n      for (let j = flow[0].length - 1; j >= 0; j--) {\r\n        // Iterate through every child in each token and push it to children\r\n        for (let k = 0; k < flow[0][j].children.length; k++) {\r\n          // let childIndex = flow[0][j].children[k];\r\n\r\n          let child = readable.find(\r\n            (el) => el[0].id === flow[0][j].children[k]\r\n          );\r\n          children.unshift(child[0]);\r\n        }\r\n      }\r\n\r\n      if (children.length > 0) {\r\n        flow.unshift(children);\r\n      }\r\n    }\r\n    //   console.log(flow);\r\n    return flow;\r\n  });\r\n\r\n  // Compacts all nodes without inter-dependencies onto the same level\r\n  const compactedSentenceFlow = computed(() => {\r\n    if (sentenceFlow.value.length === 0) {\r\n      return [];\r\n    }\r\n\r\n    // Deep clone array so our modifications don't recursively retrigger computation\r\n    let readable = JSON.parse(JSON.stringify(sentenceFlow.value));\r\n    let flow = [];\r\n    flow.push([]);\r\n\r\n    const levelDependency = new Set();\r\n    for (let i = 0; i < readable.length; i++) {\r\n      // Adds token to current level\r\n      let currentToken = readable[i][0];\r\n      flow[flow.length - 1].push(currentToken);\r\n      levelDependency.add(currentToken.id);\r\n\r\n      if (i === readable.length - 1) {\r\n        break;\r\n      }\r\n\r\n      // Check if next token is dependent on something on current level\r\n      for (const child of readable[i + 1][0].children) {\r\n        if (levelDependency.has(child)) {\r\n          // Create new level\r\n          flow.push([]);\r\n          levelDependency.clear();\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    //   console.log(flow);\r\n    return flow;\r\n  });\r\n\r\n  // Sorts children of token in descending flow order\r\n  const sortTokenChildren = (tokenObject) => {\r\n    tokenObject.children.sort((a, b) => {\r\n      const flattened = sentenceFlow.value.flat();\r\n      const aIndex = flattened.findIndex((el) => el.id === a);\r\n      const bIndex = flattened.findIndex((el) => el.id === b);\r\n      return bIndex - aIndex;\r\n    });\r\n  };\r\n\r\n  return {\r\n    sentenceFlow,\r\n    sentenceFlowString,\r\n    levelsFlow,\r\n    compactedSentenceFlow,\r\n    sortTokenChildren,\r\n  };\r\n};","import { render } from \"./SentenceInput.vue?vue&type=template&id=5b3ece85\"\nimport script from \"./SentenceInput.vue?vue&type=script&lang=js\"\nexport * from \"./SentenceInput.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\r\n  <div class=\"card\">\r\n    <div class=\"card-content\">\r\n      <table style=\"table-layout: fixed; width: 100%\" class=\"table\">\r\n        <thead>\r\n          <th class=\"hide-overflow\">Token</th>\r\n          <th class=\"hide-overflow\">Parent</th>\r\n        </thead>\r\n        <tbody>\r\n          <TokenTableRow\r\n            @row-change=\"updateSentence\"\r\n            v-for=\"(token, index) in sentenceFlow.slice(0, -1)\"\r\n            :label=\"token[0].label\"\r\n            :id=\"token[0].id\"\r\n            :value=\"token[0].parentId\"\r\n            :index=\"index\"\r\n            :key=\"index\"\r\n          >\r\n          </TokenTableRow>\r\n          <tr v-if=\"sentenceFlow.length > 0\">\r\n            <td\r\n              class=\"hide-overflow\"\r\n            >\r\n              {{ sentenceFlow[sentenceFlow.length - 1][0].label }}\r\n            </td>\r\n            <td>\r\n              Root Node\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport TokenTableRow from \"./TokenTableRow\";\r\nimport { useState } from \"@/api/sentenceFlow\";\r\n\r\nexport default {\r\n  setup() {\r\n    const { sentenceFlow, sortTokenChildren } = useState();\r\n    return { sentenceFlow, sortTokenChildren };\r\n  },\r\n  components: {\r\n    TokenTableRow,\r\n  },\r\n  methods: {\r\n    updateSentence({ id, index, parentId, parentIndex }) {\r\n      console.log(\"sentence updated\");\r\n\r\n      // Flatten array of array of objects into array of objects\r\n      let flattened = this.sentenceFlow.flat();\r\n\r\n      // Add child to parent\r\n      if (parentIndex >= 0) {\r\n        flattened[parentIndex].children.push(id);\r\n\r\n        // Sort children descending flow order\r\n        this.sortTokenChildren(flattened[parentIndex]);\r\n      }\r\n\r\n      // Remove child from former parent\r\n      let formerParent = flattened.find(\r\n        (el) => flattened[index].parentId === el.id\r\n      );\r\n\r\n      if (formerParent) {\r\n        formerParent.children = formerParent.children.filter((i) => i != id);\r\n      }\r\n\r\n      // Replace child's parent parameter\r\n      flattened[index].parentId = parentId;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.hide-overflow {\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n}\r\n</style>\r\n","<template>\r\n  <tr>\r\n    <td class=\"hide-overflow\">\r\n      {{ label }}\r\n    </td>\r\n    <td>\r\n      <div class=\"select is-small is-fullwidth\">\r\n        <select v-model=\"innerValue\" @change=\"onChange\">\r\n          <option :value=\"-1\">None</option>\r\n          <!-- Filter array to only show possible parents -->\r\n          <template\r\n            v-for=\"token in sentenceFlow.filter(\r\n              (token, parentIndex) => index < parentIndex\r\n            )\"\r\n            :key=\"token[0].id\"\r\n          >\r\n            <option :value=\"token[0].id\">\r\n              {{ token[0].label }}\r\n            </option>\r\n          </template>\r\n        </select>\r\n      </div>\r\n    </td>\r\n  </tr>\r\n</template>\r\n\r\n<script>\r\nimport { useState } from \"@/api/sentenceFlow\";\r\n\r\nexport default {\r\n  setup() {\r\n    const { sentenceFlow } = useState();\r\n    return { sentenceFlow };\r\n  },\r\n  props: {\r\n    label: {\r\n      required: true,\r\n      type: String,\r\n    },\r\n    id: {\r\n      required: true,\r\n      type: Number,\r\n    },\r\n    index: {\r\n      required: true,\r\n      type: Number,\r\n    },\r\n    value: {\r\n      default: -1,\r\n      type: Number,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      innerValue: this.value,\r\n    };\r\n  },\r\n  watch: {\r\n    value() {\r\n      this.innerValue = this.value;\r\n    },\r\n  },\r\n  methods: {\r\n    onChange() {\r\n      // Find parent index\r\n      // We can't get the index from the select tag because index could change at any time\r\n      let parentIndex = this.sentenceFlow.findIndex(\r\n        (el) => el[0].id === this.innerValue\r\n      );\r\n\r\n      this.$emit(\"row-change\", {\r\n        id: this.id,\r\n        index: this.index,\r\n        parentId: parseInt(this.innerValue),\r\n        parentIndex,\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>","import { render } from \"./TokenTableRow.vue?vue&type=template&id=31421bc6\"\nimport script from \"./TokenTableRow.vue?vue&type=script&lang=js\"\nexport * from \"./TokenTableRow.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./TokenTable.vue?vue&type=template&id=285332f8\"\nimport script from \"./TokenTable.vue?vue&type=script&lang=js\"\nexport * from \"./TokenTable.vue?vue&type=script&lang=js\"\n\nimport \"./TokenTable.vue?vue&type=style&index=0&id=285332f8&lang=css\"\nscript.render = render\n\nexport default script","<template>\r\n  <div class=\"card\">\r\n    <div style=\"position: static; height: 100%\" class=\"card-content\">\r\n      <flow-selector\r\n        style=\"max-width: 100%; position: absolute; top: 1.5rem; right: 1.5rem;\"\r\n        @flow-change=\"\r\n          (val) => {\r\n            selectedFlow = val;\r\n          }\r\n        \"\r\n      />\r\n      <svg\r\n        id=\"flow-graph\"\r\n        ref=\"svg\"\r\n        width=\"100%\"\r\n        :height=\"`max(${treeData.layout.height}px, 600px)`\"\r\n      >\r\n        <g class=\"svg-pan-zoom_viewport\">\r\n          <template v-for=\"(l, index) in treeData.links\" :key=\"index\">\r\n            <path\r\n              :d=\"\r\n                `M${l.xt} ${l.yt}\r\n         L${l.xb - 16} ${l.yt}\r\n         A16 16 90 0 1 ${l.xb} ${l.yt + 16}\r\n         L${l.xb} ${l.ys - 16}\r\n         A16 16 90 0 0 ${l.xb + 16} ${l.ys}\r\n         L${l.xs} ${l.ys}`\r\n              \"\r\n              fill=\"none\"\r\n              :stroke=\"`${color(l.bundle.id)}`\"\r\n              stroke-width=\"2\"\r\n            />\r\n          </template>\r\n          <template v-for=\"(n, index) in treeData.nodes\" :key=\"index\">\r\n            <text\r\n              :x=\"n.x + 2\"\r\n              :y=\"n.y - 14\"\r\n              dy=\"0.35em\"\r\n              stroke=\"white\"\r\n              stroke-width=\"4\"\r\n            >\r\n              {{ n.label }}\r\n            </text>\r\n            <line\r\n              stroke-linecap=\"round\"\r\n              stroke=\"black\"\r\n              stroke-width=\"8\"\r\n              :x1=\"n.x\"\r\n              :y1=\"n.y\"\r\n              :x2=\"n.x\"\r\n              :y2=\"n.y\"\r\n            />\r\n            <line\r\n              stroke-linecap=\"round\"\r\n              stroke=\"white\"\r\n              stroke-width=\"4\"\r\n              :x1=\"n.x\"\r\n              :y1=\"n.y\"\r\n              :x2=\"n.x\"\r\n              :y2=\"n.y\"\r\n            />\r\n            <text :x=\"n.x + 2\" :y=\"n.y - 14\" dy=\"0.35em\">{{ n.label }}</text>\r\n          </template>\r\n        </g>\r\n      </svg>\r\n      <div style=\"position: absolute; bottom: 1.5rem; left: 1.5rem;\">\r\n        <div class=\"control field is-grouped\">\r\n          <button\r\n            class=\"button control is-small\"\r\n            @click=\"panZoom ? panZoom.center() : null\"\r\n          >\r\n            Center\r\n          </button>\r\n          <button\r\n            class=\"button control is-small\"\r\n            @click=\"panZoom ? panZoom.fit() : null\"\r\n          >\r\n            Fit\r\n          </button>\r\n        </div>\r\n        <div class=\"control field is-grouped\">\r\n          <button\r\n            class=\"button control is-small\"\r\n            @click=\"panZoom ? panZoom.zoomIn() : null\"\r\n          >\r\n            Zoom In\r\n          </button>\r\n          <button\r\n            class=\"button control is-small\"\r\n            @click=\"panZoom ? panZoom.zoomOut() : null\"\r\n          >\r\n            Zoom Out\r\n          </button>\r\n        </div>\r\n        <div class=\"is-size-7\">*You can scroll to zoom on desktop</div>\r\n      </div>\r\n      <div style=\"position: absolute; bottom: 1.5rem; right: 1.5rem;\">\r\n        <button class=\"button control is-small\" @click=\"downloadSvg\">\r\n          Download PNG\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// import * as d3 from \"d3\";\r\nimport { ref } from \"vue\";\r\nimport svgPanZoom from \"svg-pan-zoom\";\r\nimport initiateDraggable from \"@/composition/initiateDraggable\";\r\nimport { scaleOrdinal } from \"d3-scale\";\r\nimport { schemeDark2 } from \"d3-scale-chromatic\";\r\nimport { useState } from \"@/api/sentenceFlow\";\r\nimport FlowSelector from \"@/components/FlowSelector\";\r\n\r\nexport default {\r\n  components: {\r\n    FlowSelector,\r\n  },\r\n  setup() {\r\n    const sentenceFlow = useState();\r\n\r\n    const svg = ref(null);\r\n    const insert = ref(null);\r\n\r\n    const downloadSvg = () => {\r\n      const canvas = document.createElement(\"canvas\");\r\n      const svgClone = svg.value.cloneNode(true);\r\n\r\n      // Get the bounds of the SVG content\r\n      var bbox = svg.value.firstChild.getBBox();\r\n      const width = bbox.x + bbox.width + bbox.x;\r\n      // The +4 is to account for padding of last node\r\n      const height = bbox.y + bbox.height + bbox.y + 4;\r\n\r\n      // Update the width and height using the size of the contents\r\n      svgClone.setAttribute(\"width\", width);\r\n      svgClone.setAttribute(\"height\", height);\r\n\r\n      // Place generated svg into view\r\n      svgClone.firstChild.setAttribute(\"style\", \"\");\r\n      svgClone.firstChild.setAttribute(\"transform\", \"\");\r\n\r\n      // Prepare canvas\r\n      const ctx = canvas.getContext(\"2d\");\r\n      const paddingX = 8;\r\n      const paddingY = 8;\r\n      canvas.width = width + 2 * paddingX;\r\n      canvas.height = height + 2 * paddingY;\r\n      ctx.fillStyle = \"white\";\r\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\r\n      // Convert SVG to data url\r\n      const DOMURL = window.URL || window.webkitURL || window;\r\n      const img = new Image();\r\n      const s = new XMLSerializer();\r\n      const imageData = s.serializeToString(svgClone);\r\n      const svgBlob = new Blob([imageData], {\r\n        type: \"image/svg+xml;charset=utf-8\",\r\n      });\r\n      const url = DOMURL.createObjectURL(svgBlob);\r\n\r\n      img.onload = () => {\r\n        ctx.drawImage(img, paddingX, paddingY);\r\n        DOMURL.revokeObjectURL(url);\r\n\r\n        const imgURI = canvas\r\n          .toDataURL(\"image/png\")\r\n          .replace(\"image/png\", \"image/octet-stream\");\r\n\r\n        const evt = new MouseEvent(\"click\", {\r\n          view: window,\r\n          bubbles: false,\r\n          cancelable: true,\r\n        });\r\n\r\n        const a = document.createElement(\"a\");\r\n        a.setAttribute(\"download\", \"dependency_diagram.png\");\r\n        a.setAttribute(\"href\", imgURI);\r\n        a.setAttribute(\"target\", \"_blank\");\r\n\r\n        a.dispatchEvent(evt);\r\n      };\r\n\r\n      img.src = url;\r\n    };\r\n\r\n    return {\r\n      ...sentenceFlow,\r\n      ...initiateDraggable(svg),\r\n      svg,\r\n      insert,\r\n      downloadSvg,\r\n    };\r\n  },\r\n  data() {\r\n    return {\r\n      color: scaleOrdinal(schemeDark2),\r\n      selectedFlow: 1,\r\n    };\r\n  },\r\n  computed: {\r\n    currentFlow() {\r\n      switch (parseInt(this.selectedFlow)) {\r\n        case 1:\r\n          return this.compactedSentenceFlow;\r\n        case 2:\r\n          return this.levelsFlow;\r\n        case 0:\r\n        default:\r\n          return this.sentenceFlow;\r\n      }\r\n    },\r\n    treeData() {\r\n      // Deep clone array so our modifications don't recursively retrigger computation\r\n      let levels = JSON.parse(JSON.stringify(this.currentFlow));\r\n\r\n      // precompute level depth\r\n      levels.forEach((l, i) => l.forEach((n) => (n.level = i)));\r\n\r\n      var nodes = levels.reduce((a, x) => a.concat(x), []);\r\n      var nodes_index = {};\r\n      nodes.forEach((d) => (nodes_index[d.id] = d));\r\n\r\n      // objectification\r\n      nodes.forEach((d) => {\r\n        d.children = (d.children === undefined ? [] : d.children).map(\r\n          (p) => nodes_index[p]\r\n        );\r\n      });\r\n\r\n      // precompute bundles\r\n      levels.forEach((l, i) => {\r\n        var index = {};\r\n        l.forEach((n) => {\r\n          //   console.log(n);\r\n          if (n.children.length == 0) {\r\n            return;\r\n          }\r\n\r\n          var id = n.children\r\n            .map((d) => d.id)\r\n            .sort()\r\n            .join(\"--\");\r\n          if (id in index) {\r\n            index[id].children = index[id].children.concat(n.children);\r\n          } else {\r\n            index[id] = { id: id, children: n.children.slice(), level: i };\r\n          }\r\n          n.bundle = index[id];\r\n        });\r\n        l.bundles = Object.keys(index).map((k) => index[k]);\r\n        l.bundles.forEach((b, i) => (b.i = i));\r\n      });\r\n\r\n      var links = [];\r\n      nodes.forEach((d) => {\r\n        d.children.forEach((p) =>\r\n          links.push({ source: d, bundle: d.bundle, target: p })\r\n        );\r\n      });\r\n\r\n      var bundles = levels.reduce((a, x) => a.concat(x.bundles), []);\r\n\r\n      // layout\r\n      const node_height = 32;\r\n      const node_width = 80;\r\n      const bundle_width = 16;\r\n      const level_y_padding = 25;\r\n\r\n      var x_offset = 0;\r\n      var y_offset = 0;\r\n      levels.forEach((l) => {\r\n        x_offset += l.bundles.length * bundle_width;\r\n        y_offset += level_y_padding;\r\n        l.forEach((n, i) => {\r\n          n.x = n.level * node_width + x_offset + node_height / 2;\r\n          n.y = i * node_height + y_offset;\r\n        });\r\n        y_offset += l.length * node_height;\r\n      });\r\n\r\n      var i = 0;\r\n      levels.forEach((l) => {\r\n        l.bundles.forEach((b) => {\r\n          b.x =\r\n            b.children[0].x +\r\n            node_width +\r\n            (l.bundles.length - 1 - b.i) * bundle_width;\r\n          b.y = i * node_height;\r\n        });\r\n        i += l.length;\r\n      });\r\n\r\n      links.forEach((l) => {\r\n        l.xt = l.target.x;\r\n        l.yt = l.target.y;\r\n        l.xb = l.bundle.x;\r\n        l.yb = l.bundle.y;\r\n        l.xs = l.source.x;\r\n        l.ys = l.source.y;\r\n      });\r\n\r\n      var layout = {\r\n        height: nodes.length * node_height + levels.length * level_y_padding,\r\n        node_height,\r\n        node_width,\r\n        bundle_width,\r\n      };\r\n\r\n      return { levels, nodes, nodes_index, links, bundles, layout };\r\n    },\r\n  },\r\n  watch: {\r\n    sentenceFlowString() {\r\n      // Movable library breaks if nothing is in svg\r\n      if (this.sentenceFlow.length === 0) {\r\n        return;\r\n      }\r\n\r\n      // Wait till svg is populated before instantiating\r\n      this.$nextTick(function() {\r\n        this.panZoom = svgPanZoom(\"#flow-graph\");\r\n        this.panZoom.updateBBox();\r\n        this.panZoom.resize();\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\ntext {\r\n  font-family: sans-serif;\r\n  font-size: 16px;\r\n}\r\n#flow-graph:hover {\r\n  cursor: grab;\r\n}\r\n</style>\r\n","import { ref, onMounted } from \"vue\";\r\nimport svgPanZoom from \"svg-pan-zoom\";\r\nimport Hammer from \"hammerjs\";\r\n\r\nexport default (svgElementRef) => {\r\n  const panZoom = ref(null);\r\n  const initialScale = ref(1);\r\n  const hammer = ref(null);\r\n\r\n  onMounted(() => {\r\n    panZoom.value = svgPanZoom(svgElementRef.value);\r\n\r\n    hammer.value = Hammer(svgElementRef.value, {\r\n      inputClass: Hammer.SUPPORT_POINTER_EVENTS\r\n        ? Hammer.PointerEventInput\r\n        : Hammer.TouchInput,\r\n    });\r\n\r\n    // Enable pinch\r\n    hammer.value.get(\"pinch\").set({ enable: true });\r\n\r\n    // Handle double tap\r\n    hammer.value.on(\"doubletap\", (ev) => {\r\n      panZoom.value.zoomIn();\r\n    });\r\n\r\n    // Handle pinch\r\n    hammer.value.on(\"pinchstart pinchmove\", (ev) => {\r\n      // On pinch start remember initial zoom\r\n      if (ev.type === \"pinchstart\") {\r\n        initialScale.value = panZoom.value.getZoom();\r\n        this.panZoom.zoomAtPoint(this.initialScale * ev.scale, {\r\n          x: ev.center.x,\r\n          y: ev.center.y,\r\n        });\r\n      }\r\n\r\n      panZoom.value.zoomAtPoint(initialScale.value * ev.scale, {\r\n        x: ev.center.x,\r\n        y: ev.center.y,\r\n      });\r\n    });\r\n  });\r\n\r\n  return { panZoom, initialScale, hammer };\r\n};\r\n","<template>\r\n  <div class=\"select\">\r\n    <select @change=\"$emit('flow-change', $event.target.value)\">\r\n      <option :value=\"1\">\r\n        Compacted Sentence Flow\r\n      </option>\r\n      <option :value=\"0\">\r\n        Sentence Flow\r\n      </option>\r\n      <option :value=\"2\">\r\n        Levels Flow\r\n      </option>\r\n    </select>\r\n  </div>\r\n</template>","import { render } from \"./FlowSelector.vue?vue&type=template&id=d24a7624\"\nconst script = {}\nscript.render = render\n\nexport default script","import { render } from \"./DependencyVisualizer.vue?vue&type=template&id=9cf4a9a2&scoped=true\"\nimport script from \"./DependencyVisualizer.vue?vue&type=script&lang=js\"\nexport * from \"./DependencyVisualizer.vue?vue&type=script&lang=js\"\n\nimport \"./DependencyVisualizer.vue?vue&type=style&index=0&id=9cf4a9a2&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-9cf4a9a2\"\n\nexport default script","import { render } from \"./Home.vue?vue&type=template&id=35354e9c\"\nimport script from \"./Home.vue?vue&type=script&lang=js\"\nexport * from \"./Home.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { createRouter, createWebHashHistory } from 'vue-router'\nimport Home from '../views/Home.vue'\n\nconst routes = [\n  {\n    path: '/',\n    name: 'Home',\n    component: Home\n  },\n  {\n    path: '/about',\n    name: 'About',\n    // route level code-splitting\n    // this generates a separate chunk (about.[hash].js) for this route\n    // which is lazy-loaded when the route is visited.\n    component: () => import(/* webpackChunkName: \"about\" */ '../views/About.vue')\n  }\n]\n\nconst router = createRouter({\n  history: createWebHashHistory(process.env.BASE_URL),\n  routes\n})\n\nexport default router\n","import { createStore } from \"vuex\";\n\nexport default createStore({\n  state: {},\n  getters: {},\n  mutations: {},\n  actions: {},\n  modules: {},\n});\n","import { createApp } from \"vue\";\r\nimport App from \"./App.vue\";\r\nimport router from \"./router\";\r\nimport store from \"./store\";\r\nimport \"./styles.scss\";\r\n\r\ncreateApp(App)\r\n  .use(store)\r\n  .use(router)\r\n  .mount(\"#app\");\r\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./App.vue?vue&type=style&index=0&id=006d8b32&lang=scss\"","module.exports = __webpack_public_path__ + \"img/santathomas.02c5e5b4.png\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./TokenTable.vue?vue&type=style&index=0&id=285332f8&lang=css\""],"sourceRoot":""}